2025-11-19 07:04:45,176 - __main__ - INFO - ================================================================================
2025-11-19 07:04:45,176 - __main__ - INFO - 渐进式测试框架启动
2025-11-19 07:04:45,176 - __main__ - INFO - 日志文件: /home/user/Feature-Algorithm/feature-encryption/logs/test_run_20251119_070445.log
2025-11-19 07:04:45,176 - __main__ - INFO - ================================================================================
2025-11-19 07:04:45,176 - __main__ - INFO - 
================================================================================
2025-11-19 07:04:45,176 - __main__ - INFO - 开始渐进式测试
2025-11-19 07:04:45,177 - __main__ - INFO - ================================================================================
2025-11-19 07:04:45,177 - __main__ - INFO - 
================================================================================
2025-11-19 07:04:45,177 - __main__ - INFO - 测试步骤1：配置模块
2025-11-19 07:04:45,177 - __main__ - INFO - ================================================================================
2025-11-19 07:04:45,227 - __main__ - INFO - 测试1.1: 创建默认配置
2025-11-19 07:04:45,227 - __main__ - INFO -   ✓ 默认配置创建成功
2025-11-19 07:04:45,228 - __main__ - INFO -     M_FRAMES: 6
2025-11-19 07:04:45,228 - __main__ - INFO -     TARGET_BITS: 256
2025-11-19 07:04:45,228 - __main__ - INFO -     BCH: (255, 128, 18)
2025-11-19 07:04:45,228 - __main__ - INFO - 测试1.2: 配置验证
2025-11-19 07:04:45,228 - __main__ - INFO -   ✓ 配置验证通过
2025-11-19 07:04:45,228 - __main__ - INFO - 测试1.3: 预定义配置
2025-11-19 07:04:45,228 - __main__ - INFO -   ✓ 高噪声配置: M_FRAMES=8
2025-11-19 07:04:45,228 - __main__ - INFO -   ✓ 低延迟配置: M_FRAMES=4
2025-11-19 07:04:45,228 - __main__ - INFO - 
================================================================================
2025-11-19 07:04:45,228 - __main__ - INFO - 测试步骤2：特征处理模块
2025-11-19 07:04:45,228 - __main__ - INFO - ================================================================================
2025-11-19 07:04:45,228 - __main__ - INFO - 测试2.1: CSI特征处理
2025-11-19 07:04:45,245 - __main__ - INFO -   ✓ CSI处理成功
2025-11-19 07:04:45,245 - __main__ - INFO -     输入维度: (64,)
2025-11-19 07:04:45,245 - __main__ - INFO -     输出维度: (62,)
2025-11-19 07:04:45,246 - __main__ - INFO -     掩码维度: 4
2025-11-19 07:04:45,246 - __main__ - INFO - 测试2.2: RFF特征处理
2025-11-19 07:04:45,246 - __main__ - INFO -   ✓ RFF处理成功
2025-11-19 07:04:45,246 - __main__ - INFO -     输入维度: (16,)
2025-11-19 07:04:45,246 - __main__ - INFO -     输出维度: (16,)
2025-11-19 07:04:45,246 - __main__ - INFO - 
================================================================================
2025-11-19 07:04:45,246 - __main__ - INFO - 测试步骤3：量化投票模块
2025-11-19 07:04:45,246 - __main__ - INFO - ================================================================================
2025-11-19 07:04:45,246 - __main__ - INFO - 测试3.1: 生成测试数据
2025-11-19 07:04:45,246 - __main__ - INFO -   ✓ 生成多帧特征: shape=(6, 64)
2025-11-19 07:04:45,246 - __main__ - INFO - 测试3.2: 计算量化门限
2025-11-19 07:04:45,256 - __main__ - INFO -   ✓ 门限计算成功
2025-11-19 07:04:45,256 - __main__ - INFO -     theta_L: shape=(64,), mean=-0.5587
2025-11-19 07:04:45,256 - __main__ - INFO -     theta_H: shape=(64,), mean=0.5163
2025-11-19 07:04:45,257 - __main__ - INFO - 测试3.3: 量化多帧特征
2025-11-19 07:04:45,257 - __main__ - INFO -   ✓ 量化成功
2025-11-19 07:04:45,257 - __main__ - INFO -     Q_frames: shape=(6, 64)
2025-11-19 07:04:45,257 - __main__ - INFO -     量化值: [-1  0  1]
2025-11-19 07:04:45,257 - __main__ - INFO - 测试3.4: 多数投票
2025-11-19 07:04:45,258 - __main__ - INFO -   ✓ 投票成功
2025-11-19 07:04:45,258 - __main__ - INFO -     生成比特数: 0
2025-11-19 07:04:45,258 - __main__ - INFO -     选中维度数: 0
2025-11-19 07:04:45,258 - __main__ - INFO -     比特率: 0.00%
2025-11-19 07:04:45,258 - __main__ - INFO - 测试3.5: 完整量化流程
2025-11-19 07:04:45,261 - __main__ - INFO -   ✓ 完整流程成功
2025-11-19 07:04:45,261 - __main__ - INFO -     最终比特数: 256
2025-11-19 07:04:45,261 - __main__ - INFO - 
================================================================================
2025-11-19 07:04:45,261 - __main__ - INFO - 测试步骤4：模糊提取器模块
2025-11-19 07:04:45,261 - __main__ - INFO - ================================================================================
2025-11-19 07:04:45,263 - __main__ - INFO - 测试4.1: 生成辅助数据
2025-11-19 07:04:45,264 - __main__ - INFO -   原始比特串长度: 256
2025-11-19 07:04:45,265 - __main__ - INFO -   ✓ 辅助数据生成成功
2025-11-19 07:04:45,265 - __main__ - INFO -     辅助数据长度: 68 bytes
2025-11-19 07:04:45,265 - __main__ - INFO - 测试4.2: 无噪声密钥提取
2025-11-19 07:04:45,265 - __main__ - INFO -   提取结果: 成功
2025-11-19 07:04:45,265 - __main__ - INFO -   稳定密钥长度: 256
2025-11-19 07:04:45,265 - __main__ - INFO -   ✓ 无噪声提取成功
2025-11-19 07:04:45,265 - __main__ - INFO - 测试4.3: 有噪声密钥提取
2025-11-19 07:04:45,265 - __main__ - INFO -   引入错误: 5 个比特翻转
2025-11-19 07:04:45,266 - __main__ - INFO -   提取结果: 成功
2025-11-19 07:04:45,266 - __main__ - INFO -   ✓ 有噪声提取成功，密钥一致
2025-11-19 07:04:45,266 - __main__ - INFO - 测试4.4: 高噪声提取（预期失败）
2025-11-19 07:04:45,266 - __main__ - INFO -   引入错误: 30 个比特翻转
2025-11-19 07:04:45,266 - __main__ - INFO -   提取结果: 成功
2025-11-19 07:04:45,266 - __main__ - INFO - 
================================================================================
2025-11-19 07:04:45,266 - __main__ - INFO - 测试步骤5：密钥派生模块
2025-11-19 07:04:45,266 - __main__ - INFO - ================================================================================
2025-11-19 07:04:45,266 - __main__ - INFO - 测试5.1: 计算随机扰动值L
2025-11-19 07:04:45,266 - __main__ - INFO -   ✓ L计算成功
2025-11-19 07:04:45,267 - __main__ - INFO -     L长度: 32 bytes
2025-11-19 07:04:45,267 - __main__ - INFO -     L前16字节: 910c76ab9bb6548cc0b49242899fa7ac
2025-11-19 07:04:45,267 - __main__ - INFO - 测试5.2: 派生特征密钥K
2025-11-19 07:04:45,268 - __main__ - INFO -   ✓ K派生成功
2025-11-19 07:04:45,268 - __main__ - INFO -     K长度: 32 bytes
2025-11-19 07:04:45,268 - __main__ - INFO -     K前16字节: 925458f15163f714baf5c0123c9e5a80
2025-11-19 07:04:45,268 - __main__ - INFO - 测试5.3: 派生会话密钥Ks
2025-11-19 07:04:45,268 - __main__ - INFO -   ✓ Ks派生成功
2025-11-19 07:04:45,268 - __main__ - INFO -     Ks长度: 32 bytes
2025-11-19 07:04:45,268 - __main__ - INFO -     Ks前16字节: 3bf015a8c68b5a807f44bb7fe88ee60f
2025-11-19 07:04:45,268 - __main__ - INFO - 测试5.4: 生成一致性摘要
2025-11-19 07:04:45,268 - __main__ - INFO -   ✓ digest生成成功
2025-11-19 07:04:45,268 - __main__ - INFO -     digest长度: 8 bytes
2025-11-19 07:04:45,268 - __main__ - INFO -     digest: f29653f5c74ed1a4
2025-11-19 07:04:45,268 - __main__ - INFO - 测试5.5: 验证派生确定性
2025-11-19 07:04:45,269 - __main__ - INFO -   ✓ 相同输入产生相同密钥
2025-11-19 07:04:45,269 - __main__ - INFO - 测试5.6: 验证不同输入产生不同密钥
2025-11-19 07:04:45,269 - __main__ - INFO -   ✓ 不同epoch产生不同密钥
2025-11-19 07:04:45,269 - __main__ - INFO - 
================================================================================
2025-11-19 07:04:45,269 - __main__ - INFO - 测试步骤6：完整集成流程（注册-认证）
2025-11-19 07:04:45,269 - __main__ - INFO - ================================================================================
2025-11-19 07:04:45,269 - __main__ - INFO - 测试6.1: 准备测试环境
2025-11-19 07:04:45,269 - __main__ - INFO -   ✓ 上下文创建成功
2025-11-19 07:04:45,269 - __main__ - INFO - 测试6.2: 生成模拟CSI特征
2025-11-19 07:04:45,269 - __main__ - INFO -   ✓ 注册特征: shape=(6, 62)
2025-11-19 07:04:45,269 - __main__ - INFO - 测试6.3: 执行注册
2025-11-19 07:04:45,272 - __main__ - INFO -   ✓ 注册成功
2025-11-19 07:04:45,272 - __main__ - INFO -     S: ffffffffffffff3f0380f33ffa7e5063b437f0d6...
2025-11-19 07:04:45,272 - __main__ - INFO -     K: a8de276dd4bfb4c627b4ddb93962c92f87caa20a...
2025-11-19 07:04:45,273 - __main__ - INFO -     Ks: 18c22689a0ae42320a2cc28dea806e2928bd836c...
2025-11-19 07:04:45,273 - __main__ - INFO -     digest: 1301c08038661566
2025-11-19 07:04:45,273 - __main__ - INFO -     比特数: 256
2025-11-19 07:04:45,273 - __main__ - INFO - 测试6.4: 生成认证特征
2025-11-19 07:04:45,273 - __main__ - INFO -   ✓ 认证特征: shape=(6, 62)
2025-11-19 07:04:45,273 - __main__ - INFO - 测试6.5: 执行认证
2025-11-19 07:04:45,275 - __main__ - ERROR - ✗ 完整集成流程测试失败: 认证失败！BCH解码未成功
Traceback (most recent call last):
  File "/home/user/Feature-Algorithm/feature-encryption/test_progressive.py", line 449, in test_step_6_integration
    raise ValueError("认证失败！BCH解码未成功")
ValueError: 认证失败！BCH解码未成功
2025-11-19 07:04:45,277 - __main__ - ERROR - 测试失败，停止后续测试: Step 6: 完整集成流程
2025-11-19 07:04:45,277 - __main__ - ERROR - 错误信息: 认证失败！BCH解码未成功
2025-11-19 07:04:45,277 - __main__ - INFO - 
================================================================================
2025-11-19 07:04:45,277 - __main__ - INFO - 测试结果总结
2025-11-19 07:04:45,277 - __main__ - INFO - ================================================================================
2025-11-19 07:04:45,277 - __main__ - INFO - ✓ PASS - Step 1: 配置模块
2025-11-19 07:04:45,277 - __main__ - INFO - ✓ PASS - Step 2: 特征处理模块
2025-11-19 07:04:45,277 - __main__ - INFO - ✓ PASS - Step 3: 量化投票模块
2025-11-19 07:04:45,277 - __main__ - INFO - ✓ PASS - Step 4: 模糊提取器模块
2025-11-19 07:04:45,277 - __main__ - INFO - ✓ PASS - Step 5: 密钥派生模块
2025-11-19 07:04:45,277 - __main__ - INFO - ✗ FAIL - Step 6: 完整集成流程
2025-11-19 07:04:45,277 - __main__ - INFO -   错误: 认证失败！BCH解码未成功
2025-11-19 07:04:45,277 - __main__ - INFO - 
================================================================================
2025-11-19 07:04:45,278 - __main__ - INFO - 测试完成: 5/6 通过
2025-11-19 07:04:45,278 - __main__ - ERROR - ✗✗✗ 部分测试失败，需要修复
2025-11-19 07:04:45,278 - __main__ - INFO - ================================================================================
2025-11-19 07:04:45,278 - __main__ - INFO - 详细日志已保存到: /home/user/Feature-Algorithm/feature-encryption/logs/test_run_20251119_070445.log
2025-11-19 07:04:45,278 - __main__ - INFO - ================================================================================

